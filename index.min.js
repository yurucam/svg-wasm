/**
 * @file This library uses [resvg](https://github.com/RazrFalcon/resvg), which is licensed unser MPL-2.0. The source code for resvg can be found [here](https://github.com/RazrFalcon/resvg).
 */
"use strict";var svg2webpWasm=(()=>{var F=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var V=(e,n)=>{for(var t in n)F(e,t,{get:n[t],enumerable:!0})},k=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of L(n))!P.call(e,o)&&o!==t&&F(e,o,{get:()=>n[o],enumerable:!(i=D(n,o))||i.enumerable});return e};var q=e=>k(F({},"__esModule",{value:!0}),e);var Z={};V(Z,{createSvg2jpeg:()=>T,createSvg2webp:()=>z,initialize:()=>Q,svg2jpeg:()=>Y,svg2webp:()=>X});var r,W=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&W.decode();var p=null;function b(){return(p===null||p.byteLength===0)&&(p=new Uint8Array(r.memory.buffer)),p}function A(e,n){return e=e>>>0,W.decode(b().subarray(e,e+n))}var _=0;function B(e,n){let t=n(e.length*1,1)>>>0;return b().set(e,t/1),_=e.length,t}var v=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},N=typeof v.encodeInto=="function"?function(e,n){return v.encodeInto(e,n)}:function(e,n){let t=v.encode(e);return n.set(t),{read:e.length,written:t.length}};function u(e,n,t){if(t===void 0){let s=v.encode(e),d=n(s.length,1)>>>0;return b().subarray(d,d+s.length).set(s),_=s.length,d}let i=e.length,o=n(i,1)>>>0,l=b(),a=0;for(;a<i;a++){let s=e.charCodeAt(a);if(s>127)break;l[o+a]=s}if(a!==i){a!==0&&(e=e.slice(a)),o=t(o,i,i=a+e.length*3,1)>>>0;let s=b().subarray(o+a,o+i),d=N(e,s);a+=d.written,o=t(o,i,a,1)>>>0}return _=a,o}function f(e){return e==null}function C(e){let n=r.__wbindgen_export_0.get(e);return r.__externref_table_dealloc(e),n}function E(e,n){return e=e>>>0,b().subarray(e/1,e/1+n)}var w=null;function $(){return(w===null||w.buffer.detached===!0||w.buffer.detached===void 0&&w.buffer!==r.memory.buffer)&&(w=new DataView(r.memory.buffer)),w}function J(e,n){e=e>>>0;let t=$(),i=[];for(let o=e;o<e+4*n;o+=4)i.push(r.__wbindgen_export_0.get(t.getUint32(o,!0)));return r.__externref_drop_slice(e,n),i}function x(e,n,t,i,o){var l=f(e)?0:u(e,r.__wbindgen_malloc,r.__wbindgen_realloc),a=_,s=f(n)?0:u(n,r.__wbindgen_malloc,r.__wbindgen_realloc),d=_,g=f(t)?0:u(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=_,y=f(i)?0:u(i,r.__wbindgen_malloc,r.__wbindgen_realloc),j=_,U=f(o)?0:u(o,r.__wbindgen_malloc,r.__wbindgen_realloc),I=_;let R=r.createConverter(l,a,s,d,g,c,y,j,U,I);return h.__wrap(R)}var O=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_converter_free(e>>>0,1)),h=class e{static __wrap(n){n=n>>>0;let t=Object.create(e.prototype);return t.__wbg_ptr=n,O.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let n=this.__wbg_ptr;return this.__wbg_ptr=0,O.unregister(this),n}free(){let n=this.__destroy_into_raw();r.__wbg_converter_free(n,0)}registerFont(n){let t=B(n,r.__wbindgen_malloc),i=_;r.converter_registerFont(this.__wbg_ptr,t,i)}convert_to_webp(n,t,i,o,l){let a=u(n,r.__wbindgen_malloc,r.__wbindgen_realloc),s=_;var d=f(l)?0:u(l,r.__wbindgen_malloc,r.__wbindgen_realloc),g=_;let c=r.converter_convert_to_webp(this.__wbg_ptr,a,s,f(t)?4294967297:Math.fround(t),f(i)?4294967297:Math.fround(i),f(o)?4294967297:Math.fround(o),d,g);if(c[3])throw C(c[2]);var y=E(c[0],c[1]).slice();return r.__wbindgen_free(c[0],c[1]*1,1),y}convert_to_jpeg(n,t,i,o,l){let a=u(n,r.__wbindgen_malloc,r.__wbindgen_realloc),s=_;var d=f(l)?0:u(l,r.__wbindgen_malloc,r.__wbindgen_realloc),g=_;let c=r.converter_convert_to_jpeg(this.__wbg_ptr,a,s,f(t)?4294967297:Math.fround(t),f(i)?4294967297:Math.fround(i),f(o)?4294967297:Math.fround(o),d,g);if(c[3])throw C(c[2]);var y=E(c[0],c[1]).slice();return r.__wbindgen_free(c[0],c[1]*1,1),y}list_fonts(){let n=r.converter_list_fonts(this.__wbg_ptr);var t=J(n[0],n[1]).slice();return r.__wbindgen_free(n[0],n[1]*4,4),t}};async function G(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(i){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}let t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{let t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function H(){let e={};return e.wbg={},e.wbg.__wbindgen_init_externref_table=function(){let n=r.__wbindgen_export_0,t=n.grow(4);n.set(0,void 0),n.set(t+0,void 0),n.set(t+1,null),n.set(t+2,!0),n.set(t+3,!1)},e.wbg.__wbindgen_string_new=function(n,t){return A(n,t)},e.wbg.__wbindgen_throw=function(n,t){throw new Error(A(n,t))},e}function K(e,n){return r=e.exports,M.__wbindgen_wasm_module=n,w=null,p=null,r.__wbindgen_start(),r}async function M(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("svg2webp_bg.wasm",void 0));let n=H();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));let{instance:t,module:i}=await G(await e,n);return K(t,i)}var S=M;var m=!1,Q=async e=>{if(m)throw new Error("Already initialized. The `initialize` function can be used only once.");await S(await e),m=!0},z=e=>{if(!m)throw new Error("WASM has not been initialized. Call `initialize` function.");let n;n=x(e?.defaultFontFamily?.serifFamily,e?.defaultFontFamily?.sansSerifFamily,e?.defaultFontFamily?.cursiveFamily,e?.defaultFontFamily?.fantasyFamily,e?.defaultFontFamily?.monospaceFamily);for(let i of e?.fonts??[])n.registerFont(i);let t=(i,o)=>new Promise((l,a)=>{try{let s=n?.convert_to_webp(i,o?.scale,o?.width,o?.height,o?.backgroundColor);if(s)l(s);else throw new Error("Converter already disposed.")}catch(s){s instanceof Error?a(s):a(new Error(`${s}`))}});return t.dispose=()=>{n?.free(),n=void 0},t.getLoadedFontFamilies=()=>n?.list_fonts()??[],t},T=e=>{if(!m)throw new Error("WASM has not been initialized. Call `initialize` function.");let n;n=x(e?.defaultFontFamily?.serifFamily,e?.defaultFontFamily?.sansSerifFamily,e?.defaultFontFamily?.cursiveFamily,e?.defaultFontFamily?.fantasyFamily,e?.defaultFontFamily?.monospaceFamily);for(let i of e?.fonts??[])n.registerFont(i);let t=(i,o)=>new Promise((l,a)=>{try{let s=n?.convert_to_jpeg(i,o?.scale,o?.width,o?.height,o?.backgroundColor);if(s)l(s);else throw new Error("Converter already disposed.")}catch(s){s instanceof Error?a(s):a(new Error(`${s}`))}});return t.dispose=()=>{n?.free(),n=void 0},t.getLoadedFontFamilies=()=>n?.list_fonts()??[],t},X=(e,n)=>{let t=z(n);return t(e,n).finally(()=>t.dispose())},Y=(e,n)=>{let t=T(n);return t(e,n).finally(()=>t.dispose())};return q(Z);})();
